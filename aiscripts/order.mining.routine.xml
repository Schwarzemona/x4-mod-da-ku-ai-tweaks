<?xml version='1.0' encoding='utf-8'?>
<diff>
  <replace sel="/aiscript/order[@id='MiningRoutine'][@name='{1041, 341}']/params/param[@name='minbuy']/input_param[@name='max'][@value='[([@this.ship.commander.tradenpc.skill.management, @this.ship.pilot.skill.piloting].max / 3) - 1, 0].max']/@value">[([@this.assignedcontrolled.commander.tradenpc.skill.management, @this.assignedcontrolled.commander.pilot.skill.management, @this.assignedcontrolled.pilot.skill.piloting].max),12].max - 1</replace>
  <replace sel="/aiscript/order[@id='MiningRoutine'][@name='{1041, 341}']/params/param[@name='maxbuy']/input_param[@name='max'][@value='[@this.ship.commander.tradenpc.skill.management, @this.ship.pilot.skill.piloting].max / 3']/@value">[([@this.assignedcontrolled.commander.tradenpc.skill.management, @this.assignedcontrolled.commander.pilot.skill.management, @this.assignedcontrolled.pilot.skill.piloting].max),12].max</replace>
  <replace sel="/aiscript/order[@id='MiningRoutine'][@name='{1041, 341}']/params/param[@name='minsell']/input_param[@name='max'][@value='[([@this.ship.commander.tradenpc.skill.management, @this.ship.pilot.skill.piloting].max / 3) - 1, 0].max']/@value">[([@this.assignedcontrolled.commander.tradenpc.skill.management, @this.assignedcontrolled.commander.pilot.skill.management, @this.assignedcontrolled.pilot.skill.piloting].max),12].max - 1</replace>
  <replace sel="/aiscript/order[@id='MiningRoutine'][@name='{1041, 341}']/params/param[@name='maxsell']/input_param[@name='max'][@value='[@this.ship.commander.tradenpc.skill.management, @this.ship.pilot.skill.piloting].max / 3']/@value">[([@this.assignedcontrolled.commander.tradenpc.skill.management, @this.assignedcontrolled.commander.pilot.skill.management, @this.assignedcontrolled.pilot.skill.piloting].max),12].max</replace>
  <replace sel="/aiscript/order[@id='MiningRoutine'][@name='{1041, 341}']/params/param[@name='effectiveskill']/@default">100</replace>
  <replace sel="/aiscript/init/do_if[@value='this.isplayerowned']/set_value[@name='$maxrange'][@exact='[@this.assignedcontrolled.commander.tradenpc.skill.management, @this.skill.piloting].max / 3']/@exact">[([@this.assignedcontrolled.commander.tradenpc.skill.management, @this.assignedcontrolled.commander.pilot.skill.management, @this.assignedcontrolled.pilot.skill.piloting].max),12].max</replace>
  <remove sel="/aiscript/init/do_if[@value='this.isplayerowned']/do_if[@value='$effectiveskill == 100']"/>
  <replace sel="/aiscript/attention[@min='unknown']/actions/do_if[@value='not @$tradeorder.exists']/do_if[@value='this.assignedcontrolled.cargo.count']/do_if[@value='not this.isplayerowned']/@value">(not this.isplayerowned) or ((this.assignedcontrolled.cargo.free.all)f / this.assignedcontrolled.cargo.capacity.all le 0.5)</replace>
</diff>
