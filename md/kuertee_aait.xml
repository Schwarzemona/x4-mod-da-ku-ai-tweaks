<?xml version="1.0" encoding="utf-8"?>
<mdscript name="kuertee_aait" xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xsi:noNamespaceSchemaLocation="md.xsd">
	<cues>
		<cue name="kAAIT2" namespace="this" version="2">
			<actions>
				<set_value name="global.$kAAIT" exact="this" />
			</actions>
			<patch sinceversion="2">
				<debug_text text="'patch sinceversion, state: ' + this.state" />
				<set_value name="global.$SuppressCommChatter" exact="false" />
			</patch>
			<cues>
				<cue name="kAAIT2_OnLuaLoaderReady">
					<conditions>
						<event_ui_triggered screen="'Lua_Loader'" control="'Ready'" />
					</conditions>
					<actions>
						<!-- <raise_lua_event name="'Lua_Loader.Load'" param="'extensions.kuertee_aait.ui.kuertee_aait'" /> -->
					</actions>
				</cue>
				<cue name="kAAIT2_OnLuaLoaderReadyCompleted">
					<conditions>
						<event_cue_completed cue="kAAIT2_OnLuaLoaderReady" />
					</conditions>
					<actions>
						<reset_cue cue="this" />
						<reset_cue cue="kAAIT2_OnLuaLoaderReady" />
					</actions>
				</cue>
				<cue name="kAAIT2_Config" namespace="this" version="17">
					<actions>
						<set_value name="global.$kAAIT_Data" exact="this" />
						<set_value name="global.$kAAIT_Data.$debugChance" exact="0" />
						<!-- configs: -->
						<debug_text text="'patch sinceversion 3, state: ' + this.state" />
						<!-- kAAIT_ApplyCustomBehaviourOrNot, kAAIT_MoveAroundOrNot -->
						<set_value name="global.$kAAIT_Data.$xssm_isAvoidHighRisk" exact="true" />
						<set_value name="global.$kAAIT_Data.$xssm_isAvoidHighRisk_allFactions" exact="false" />
						<!-- kAAIT_MoveAroundOrNot -->
						<set_value name="global.$kAAIT_Data.$lxl_isAvoidHighRisk_vShip" exact="true" />
						<set_value name="global.$kAAIT_Data.$lxl_isAvoidHighRisk_vShip_allFactions" exact="true" />
						<set_value name="global.$kAAIT_Data.$lxl_isAvoidHighRisk_vStation" exact="true" />
						<set_value name="global.$kAAIT_Data.$lxl_isAvoidHighRisk_vStation_allFactions" exact="true" />
						<!-- kAAIT_LXL_StepForwardOrMoveOutOfRange -->
						<set_value name="global.$kAAIT_Data.$lxl_moveToEngagePosition_vShip" exact="true" />
						<set_value name="global.$kAAIT_Data.$lxl_isStepForward_vShip" exact="false" />
						<set_value name="global.$kAAIT_Data.$lxl_isStepForward_vShip_allFactions" exact="false" />
						<set_value name="global.$kAAIT_Data.$lxl_isMoveOutOfRange_vShip" exact="true" />
						<set_value name="global.$kAAIT_Data.$lxl_isMoveOutOfRange_vShip_allFactions" exact="false" />
						<set_value name="global.$kAAIT_Data.$lxl_isStepForward_vStation" exact="true" />
						<set_value name="global.$kAAIT_Data.$lxl_isStepForward_vStation_allFactions" exact="false" />
						<set_value name="global.$kAAIT_Data.$lxl_isMoveOutOfRange_vStation" exact="true" />
						<set_value name="global.$kAAIT_Data.$lxl_isMoveOutOfRange_vStation_allFactions" exact="false" />
						<!-- xs, s, and m -->
						<set_value name="global.$kAAIT_Data.$xss_outnumberVShips" exact="25" />
						<set_value name="global.$kAAIT_Data.$xss_outnumberVStations" exact="75" />
						<set_value name="global.$kAAIT_Data.$m_outnumberVShips" exact="50" />
						<set_value name="global.$kAAIT_Data.$m_outnumberVStations" exact="75" />
						<!-- other options -->
						<set_value name="global.$kAAIT_Data.$isUseNPCSkills" exact="true" />
						<set_value name="global.$kAAIT_Data.$isCarriersAttackLikeDestroyers" exact="false" />
						<set_value name="global.$kAAIT_Data.$isCarriersAttackLikeDestroyers_allFactions" exact="false" />
						<!-- individual ship settings -->
						<set_value name="global.$kAAIT_Data.$settingsByShipId" exact="table[]" />
						<set_value name="global.$kAAITByShipId" exact="global.$kAAIT_Data.$settingsByShipId" comment="shortcut to settingsByShipId" />
					</actions>
					<patch sinceversion="5">
						<debug_text text="'sinceversion 5, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$lxl_isStepForward_vShip" exact="global.$kAAIT_Config.$lxl_isStepForward" />
						<set_value name="global.$kAAIT_Config.$lxl_isStepForward_vShip_allFactions" exact="global.$kAAIT_Config.$lxl_isStepForward_allFactions" />
						<set_value name="global.$kAAIT_Config.$lxl_isMoveOutOfRange_vShip" exact="global.$kAAIT_Config.$lxl_isMoveOutOfRange" />
						<set_value name="global.$kAAIT_Config.$lxl_isMoveOutOfRange_vShip_allFactions" exact="global.$kAAIT_Config.$lxl_isMoveOutOfRange_allFactions" />
						<set_value name="global.$kAAIT_Config.$lxl_isStepForward_vStation" exact="true" />
						<set_value name="global.$kAAIT_Config.$lxl_isStepForward_vStation_allFactions" exact="false" />
						<set_value name="global.$kAAIT_Config.$lxl_isMoveOutOfRange_vStation" exact="true" />
						<set_value name="global.$kAAIT_Config.$lxl_isMoveOutOfRange_vStation_allFactions" exact="false" />
					</patch>
					<patch sinceversion="6">
						<debug_text text="'sinceversion 6, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$lxl_isAvoidHighRisk_vShip" exact="global.$kAAIT_Config.$lxl_isAvoidHighRisk" />
						<set_value name="global.$kAAIT_Config.$lxl_isAvoidHighRisk_vShip_allFactions" exact="global.$kAAIT_Config.$lxl_isAvoidHighRisk_allFactions" />
						<set_value name="global.$kAAIT_Config.$lxl_isAvoidHighRisk_vStation" exact="global.$kAAIT_Config.$lxl_isAvoidHighRisk" />
						<set_value name="global.$kAAIT_Config.$lxl_isAvoidHighRisk_vStation_allFactions" exact="global.$kAAIT_Config.$lxl_isAvoidHighRisk_allFactions" />
						<set_value name="global.$kAAIT_Config.$xss_outnumberVShips" exact="25" />
						<set_value name="global.$kAAIT_Config.$xss_outnumberVStations" exact="75" />
						<set_value name="global.$kAAIT_Config.$m_outnumberVShips" exact="50" />
						<set_value name="global.$kAAIT_Config.$m_outnumberVStations" exact="75" />
						<remove_value name="global.$kAAIT_Config.$lxl_isAvoidHighRisk" />
						<remove_value name="global.$kAAIT_Config.$lxl_isAvoidHighRisk_allFactions" />
						<remove_value name="global.$kAAIT_Config.$xssm_outnumberVShips" />
						<remove_value name="global.$kAAIT_Config.$xssm_outnumberVStations" />
					</patch>
					<patch sinceversion="7">
						<debug_text text="'sinceversion 7, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$lxl_moveToEngagePosition_vShip" exact="false" />
					</patch>
					<patch sinceversion="8">
						<debug_text text="'sinceversion 8, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$lxl_moveToEngagePosition_vShip" exact="true" />
					</patch>
					<patch sinceversion="9">
						<debug_text text="'sinceversion 9, state: ' + this.state" />
						<remove_value name="$optimalRangeIsMax" />
					</patch>
					<patch sinceversion="10">
						<debug_text text="'sinceversion 10, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$isUseNPCSkills" exact="true" />
					</patch>
					<patch sinceversion="11">
						<debug_text text="'sinceversion 11, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$lxl_isStepForward_vShip" exact="false" />
					</patch>
					<patch sinceversion="12">
						<debug_text text="'sinceversion 12, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$isCarriersAttackLikeDestroyers" exact="false" />
						<set_value name="global.$kAAIT_Config.$isCarriersAttackLikeDestroyers_allFactions" exact="false" />
					</patch>
					<patch sinceversion="14">
						<debug_text text="'sinceversion 14, state: ' + this.state" />
						<set_value name="global.$kAAIT_Config.$settingsByShipId" exact="table[]" />
					</patch>
					<patch sinceversion="16">
						<debug_text text="'sinceversion 16, state: ' + this.state" />
						<set_value name="global.$kAAIT_Data" exact="this" />
						<remove_value name="global.$kAAIT_Config" />
					</patch>
					<patch sinceversion="17">
						<debug_text text="'sinceversion 17, state: ' + this.state" />
						<set_value name="global.$kAAITByShipId" exact="global.$kAAIT_Data.$settingsByShipId" />
					</patch>
				</cue>
			</cues>
		</cue>
		<!--
			.dP"Y8 88  88 88 88""Yb     8888b.     db    888888    db
			`Ybo." 88  88 88 88__dP      8I  Yb   dPYb     88     dPYb
			o.`Y8b 888888 88 88"""       8I  dY  dP__Yb    88    dP__Yb
			8bodP' 88  88 88 88         8888Y"  dP""""Yb   88   dP""""Yb
		 -->
		<cue name="kAAIT_SettingsByShip" namespace="this">
			<actions>
				<create_group groupname="$ships" />
				<set_value name="global.$kAAIT_Data.$ships" exact="$ships" />
			</actions>
			<cues>
				<cue name="ShipDestroyed" instantiate="true">
					<conditions>
						<event_object_destroyed group="$ships" />
					</conditions>
					<actions>
						<debug_text text="'event.object: ' + event.object.idcode" chance="global.$kAAIT_Data.$debugChance" />
						<debug_text text="'global.$kAAIT_Data.$settingsByShipId.{$' + event.object.idcode + '} (pre): ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + event.object.idcode}" chance="global.$kAAIT_Data.$debugChance" />
						<remove_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + event.object.idcode}" />
						<debug_text text="'global.$kAAIT_Data.$settingsByShipId.{$' + event.object.idcode + '} (post): ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + event.object.idcode}" chance="global.$kAAIT_Data.$debugChance" />
					</actions>
				</cue>
			</cues>
		</cue>
		<cue name="kAAIT_InteractMenu">
			<conditions>
				<event_cue_signalled cue="md.Interact_Menu_API.Get_Actions" />
			</conditions>
			<actions>
				<debug_text text="'event.param.$object: ' + event.param.$object" chance="global.$kAAIT_Data.$debugChance" />
				<!-- <do_for_each name="$key" in="event.param">
					<debug_text text="$key + ': ' + '(' + typeof (event.param.{$key}) + ') ' + event.param.{$key}" chance="global.$kAAIT_Data.$debugChance" />
				</do_for_each> -->
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<debug_text text="'event.name: ' + event.name" chance="global.$kAAIT_Data.$debugChance" />
				<!-- <t id="101">Enable 'Attack all enemies'</t>
				<t id="102">Disable 'Attack all enemies'</t>
				<t id="103">Enable 'Avoid high-risk enemies'</t>
				<t id="104">Disable 'Avoid high-risk enemies'</t> -->
				<debug_text text="'$interact_ships.count: ' + $interact_ships.count" chance="global.$kAAIT_Data.$debugChance" />
				<set_value name="$sections" exact="[]" />
				<do_if value="$interact_ships.count == 1 and $interact_ships.{1} == $interact_target">
					<append_to_list name="$sections" exact="'main_orders'" />
				</do_if>
				<do_elseif value="@$interact_ships.count">
					<do_if value="(not $interact_target.isplayerowned) or (not $interact_target.isclass.ship)">
						<append_to_list name="$sections" exact="'selected_orders'" />
					</do_if>
					<do_else>
						<append_to_list name="$sections" exact="'selected_orders_all'" />
					</do_else>
				</do_elseif>
				<set_value name="$isAllow_attackAllEnemies" exact="false" />
				<set_value name="$isDisallow_attackAllEnemies" exact="false" />
				<set_value name="$isAllow_Avoid" exact="false" />
				<set_value name="$isDisallow_Avoid" exact="false" />
				<set_value name="$isAllow_stepForwardWithdraw" exact="false" />
				<set_value name="$isDisallow_stepForwardWithdraw" exact="false" />
				<do_for_each name="$ship" in="$interact_ships">
					<do_if value="$ship.isclass.ship">
						<do_for_each name="$order" in="$ship.orders">
							<do_if value="$order.$allowothertargets?">
								<do_if value="$order.$allowothertargets">
									<set_value name="$isDisallow_attackAllEnemies" exact="true" />
								</do_if>
								<do_if value="not $order.$allowothertargets">
									<set_value name="$isAllow_attackAllEnemies" exact="true" />
								</do_if>
							</do_if>
						</do_for_each>
						<do_if value="
							(not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}?) or
							(not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isAvoidHighRisk_user?)
						">
							<set_value name="$isAllow_Avoid" exact="true" />
							<set_value name="$isDisallow_Avoid" exact="true" />
						</do_if>
						<do_elseif value="@global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isAvoidHighRisk_user">
							<set_value name="$isDisallow_Avoid" exact="true" />
						</do_elseif>
						<do_else>
							<set_value name="$isAllow_Avoid" exact="true" />
						</do_else>
						<do_if value="
							(not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}?) or
							(not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isStepForwardWithdraw_user?)
						">
							<set_value name="$isAllow_stepForwardWithdraw" exact="true" />
							<set_value name="$isDisallow_stepForwardWithdraw" exact="true" />
						</do_if>
						<do_elseif value="@global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isStepForwardWithdraw_user">
							<set_value name="$isDisallow_stepForwardWithdraw" exact="true" />
						</do_elseif>
						<do_else>
							<set_value name="$isAllow_stepForwardWithdraw" exact="true" />
						</do_else>
						<do_if value="
							$isAllow_attackAllEnemies and
							$isDisallow_attackAllEnemies and
							$isAllow_Avoid and 
							$isDisallow_Avoid and
							$isAllow_stepForwardWithdraw and 
							$isDisallow_stepForwardWithdraw">
							<break />
						</do_if>
					</do_if>
				</do_for_each>
				<do_for_each name="$section" in="$sections">
					<do_if value="$isAllow_attackAllEnemies">
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_attack_all_section_' + $section,
							$section = $section,
							$text = {1111920, 101},
							$icon = 'widget_tick_01',
							$callback = kAAIT_Attack_all_enemies
						]" />
					</do_if>
					<do_if value="$isDisallow_attackAllEnemies">
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_attack_one_section_' + $section,
							$section = $section,
							$text = {1111920, 102},
							$icon = 'widget_cross_01',
							$callback = kAAIT_Attack_one_only
						]" />
					</do_if>
					<do_if value="$isAllow_Avoid">
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_allow_avoid_' + $section,
							$section = $section,
							$text = {1111920, 103},
							$icon = 'widget_tick_01',
							$callback = kAAIT_Enable_Avoid_high_risk
						]" />
					</do_if>
					<do_if value="$isDisallow_Avoid">
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_disallow_avoid_' + $section,
							$section = $section,
							$text = {1111920, 104},
							$icon = 'widget_cross_01',
							$callback = kAAIT_Disable_Avoid_high_risk
						]" />
					</do_if>
					<do_if value="$isAllow_stepForwardWithdraw">
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_allow_sfw_' + $section,
							$section = $section,
							$text = {1111920, 116},
							$icon = 'widget_tick_01',
							$callback = kAAIT_Enable_Step_foward_withdraw
						]" />
					</do_if>
					<do_if value="$isDisallow_stepForwardWithdraw">
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_disallow_sfw_' + $section,
							$section = $section,
							$text = {1111920, 117},
							$icon = 'widget_cross_01',
							$callback = kAAIT_Disable_Step_foward_withdraw
						]" />
					</do_if>
				</do_for_each>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Attack_all_enemies" namespace="this">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<do_if value="$interact_ships.count">
					<debug_text text="'$interact_ships: ' + $interact_ships" chance="global.$kAAIT_Data.$debugChance" />
					<do_for_each name="$ship" in="$interact_ships">
						<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isAllowOtherTargets_user" exact="true" />
						<do_for_each name="$order" in="$ship.orders">
							<do_if value="$order.$allowothertargets?">
								<!-- <set_value name="$order.$allowothertargets" exact="true" /> -->
								<edit_order_param order="$order" param="'allowothertargets'" value="true" />
							</do_if>
						</do_for_each>
					</do_for_each>
				</do_if>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Attack_one_only" namespace="this">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<do_if value="$interact_ships.count">
					<debug_text text="'$interact_ships: ' + $interact_ships" chance="global.$kAAIT_Data.$debugChance" />
					<do_for_each name="$ship" in="$interact_ships">
						<remove_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isAllowOtherTargets_user" />
						<do_for_each name="$order" in="$ship.orders">
							<do_if value="$order.$allowothertargets?">
								<!-- <set_value name="$order.$allowothertargets" exact="false" /> -->
								<edit_order_param order="$order" param="'allowothertargets'" value="false" />
							</do_if>
						</do_for_each>
					</do_for_each>
				</do_if>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Enable_Avoid_high_risk" namespace="this">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<do_if value="$interact_ships.count">
					<debug_text text="'$interact_ships: ' + $interact_ships" chance="global.$kAAIT_Data.$debugChance" />
					<do_for_each name="$ship" in="$interact_ships">
						<do_for_each name="$order" in="$ship.orders">
							<do_if value="$order.$kAAITParam_isAvoidHighRisk?">
								<edit_order_param order="$order" param="'kAAITParam_isAvoidHighRisk'" value="true" />
							</do_if>
						</do_for_each>
						<do_if value="$ship.defaultorder.$kAAITParam_isAvoidHighRisk?">
							<edit_order_param order="$ship.defaultorder" param="'kAAITParam_isAvoidHighRisk'" value="true" />
						</do_if>
						<do_if value="not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}?">
							<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}" exact="table[]" />
						</do_if>
						<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isAvoidHighRisk_user" exact="true" />
						<add_to_group groupname="kAAIT_SettingsByShip.$ships" object="$ship" />
					</do_for_each>
				</do_if>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Disable_Avoid_high_risk" namespace="this">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<do_if value="$interact_ships.count">
					<debug_text text="'$interact_ships: ' + $interact_ships" chance="global.$kAAIT_Data.$debugChance" />
					<do_for_each name="$ship" in="$interact_ships">
						<do_for_each name="$order" in="$ship.orders">
							<do_if value="$order.$kAAITParam_isAvoidHighRisk?">
								<edit_order_param order="$order" param="'kAAITParam_isAvoidHighRisk'" value="false" />
							</do_if>
						</do_for_each>
						<do_if value="$ship.defaultorder.$kAAITParam_isAvoidHighRisk?">
							<edit_order_param order="$ship.defaultorder" param="'kAAITParam_isAvoidHighRisk'" value="false" />
						</do_if>
						<do_for_each name="$order" in="$ship.orders" reverse="true">
							<do_if value="@$order.$kAAITParam_iskAAITOrder">
								<cancel_order order="$order" />
							</do_if>
						</do_for_each>
						<do_if value="not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}?">
							<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}" exact="table[]" />
						</do_if>
						<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isAvoidHighRisk_user" exact="false" />
						<add_to_group groupname="kAAIT_SettingsByShip.$ships" object="$ship" />
					</do_for_each>
				</do_if>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Enable_Step_foward_withdraw" namespace="this">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<do_if value="$interact_ships.count">
					<debug_text text="'$interact_ships: ' + $interact_ships" chance="global.$kAAIT_Data.$debugChance" />
					<do_for_each name="$ship" in="$interact_ships">
						<do_for_each name="$order" in="$ship.orders">
							<do_if value="$order.$kAAITParam_isStepForwardWithdraw?">
								<edit_order_param order="$order" param="'kAAITParam_isStepForwardWithdraw'" value="true" />
							</do_if>
						</do_for_each>
						<do_if value="$ship.defaultorder.$kAAITParam_isStepForwardWithdraw?">
							<edit_order_param order="$ship.defaultorder" param="'kAAITParam_isStepForwardWithdraw'" value="true" />
						</do_if>
						<do_if value="not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}?">
							<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}" exact="table[]" />
						</do_if>
						<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isStepForwardWithdraw_user" exact="true" />
						<add_to_group groupname="kAAIT_SettingsByShip.$ships" object="$ship" />
					</do_for_each>
				</do_if>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Disable_Step_foward_withdraw" namespace="this">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<do_if value="$interact_ships.count">
					<debug_text text="'$interact_ships: ' + $interact_ships" chance="global.$kAAIT_Data.$debugChance" />
					<do_for_each name="$ship" in="$interact_ships">
						<do_for_each name="$order" in="$ship.orders">
							<do_if value="$order.$kAAITParam_isStepForwardWithdraw?">
								<edit_order_param order="$order" param="'kAAITParam_isStepForwardWithdraw'" value="false" />
							</do_if>
						</do_for_each>
						<do_if value="$ship.defaultorder.$kAAITParam_isStepForwardWithdraw?">
							<edit_order_param order="$ship.defaultorder" param="'kAAITParam_isStepForwardWithdraw'" value="false" />
						</do_if>
						<do_for_each name="$order" in="$ship.orders" reverse="true">
							<do_if value="@$order.$kAAITParam_iskAAITOrder">
								<cancel_order order="$order" />
							</do_if>
						</do_for_each>
						<do_if value="not global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}?">
							<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}" exact="table[]" />
						</do_if>
						<set_value name="global.$kAAIT_Data.$settingsByShipId.{'$' + $ship.idcode}.$kAAIT_isStepForwardWithdraw_user" exact="false" />
						<add_to_group groupname="kAAIT_SettingsByShip.$ships" object="$ship" />
					</do_for_each>
				</do_if>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<!--
			888888 Yb  dP 888888 888888 88b 88 .dP"Y8 88  dP"Yb  88b 88      dP"Yb  88""Yb 888888 88  dP"Yb  88b 88 .dP"Y8
			88__    YbdP    88   88__   88Yb88 `Ybo." 88 dP   Yb 88Yb88     dP   Yb 88__dP   88   88 dP   Yb 88Yb88 `Ybo."
			88""    dPYb    88   88""   88 Y88 o.`Y8b 88 Yb   dP 88 Y88     Yb   dP 88"""    88   88 Yb   dP 88 Y88 o.`Y8b
			888888 dP  Yb   88   888888 88  Y8 8bodP' 88  YbodP  88  Y8      YbodP  88       88   88  YbodP  88  Y8 8bodP'
		 -->
		<cue name="kAAIT_ExtOpts">
			<conditions>
				<event_cue_signalled cue="md.Simple_Menu_Options.Reloaded"/>
			</conditions>
			<actions>
				<signal_cue_instantly cue="md.Simple_Menu_API.Register_Options_Menu"
					param="table[
						$id = 'kuertee_aait.kAAIT2_Config.on_options_menu',
						$columns = 2,
						$title = {1111920, 1},
						$onOpen = kAAIT_ExtOpts_Build
					]" />
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_ExtOpts_Build">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<!-- <t id="1">kuertee: Attack AI tweaks</t>
				<t id="2">Debug log</t>
				<t id="3">Avoid high-risk</t>
				<t id="4">Player faction</t>
				<t id="5">All other factions</t>
				<t id="6">Step forward on no damage</t>
				<t id="7">Move out of range on damage</t>
				<t id="8">XS, S, and M ships</t>
				<t id="9">L, and XL ships</t>
				<t id="10">Optimal weapon range is max weapon range</t> -->
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 8}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 3}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'xssm_isAvoidHighRisk',
						$checked = global.$kAAIT_Data.$xssm_isAvoidHighRisk,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'xssm_isAvoidHighRisk_allFactions',
						$checked = global.$kAAIT_Data.$xssm_isAvoidHighRisk_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>

				<!-- <t id="11">Attack when more than this turret count</t>
				<t id="12">Against high-risk ships</t>
				<t id="13">Against high-risk stations</t> -->
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 11}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 12}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_Slider"
					param = "table[
						$id = 'xss_outnumberVShips',
						$start = global.$kAAIT_Data.$xss_outnumberVShips,
						$col = 2,
						$text = table[$text=''],
						$min = 0, $max = 200, $step = 1, $suffix='%',
						$default = 50,
						$mouseOverText = {1001,2661} + ': 50',
						$onSliderCellChanged = kAAIT_ExtOpts_OnSliderChange
					]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 13}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_Slider"
					param = "table[
						$id = 'xss_outnumberVStations',
						$start = global.$kAAIT_Data.$xss_outnumberVStations,
						$col = 2,
						$text = table[$text=''],
						$min = 0, $max = 200, $step = 1, $suffix='%',
						$default = 75,
						$mouseOverText = {1001,2661} + ': 75',
						$onSliderCellChanged = kAAIT_ExtOpts_OnSliderChange
					]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 14}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 12}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_Slider"
					param = "table[
						$id = 'm_outnumberVShips',
						$start = global.$kAAIT_Data.$m_outnumberVShips,
						$col = 2,
						$text = table[$text=''],
						$min = 0, $max = 200, $step = 1, $suffix='%',
						$default = 50,
						$mouseOverText = {1001,2661} + ': 50',
						$onSliderCellChanged = kAAIT_ExtOpts_OnSliderChange
					]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 13}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_Slider"
					param = "table[
						$id = 'm_outnumberVStations',
						$start = global.$kAAIT_Data.$m_outnumberVStations,
						$col = 2,
						$text = table[$text=''],
						$min = 0, $max = 200, $step = 1, $suffix='%',
						$default = 75,
						$mouseOverText = {1001,2661} + ': 75',
						$onSliderCellChanged = kAAIT_ExtOpts_OnSliderChange
					]" />

				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 9}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 114}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isAvoidHighRisk_vShip',
						$checked = global.$kAAIT_Data.$lxl_isAvoidHighRisk_vShip,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isAvoidHighRisk_vShip_allFactions',
						$checked = global.$kAAIT_Data.$lxl_isAvoidHighRisk_vShip_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 115}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isAvoidHighRisk_vStation',
						$checked = global.$kAAIT_Data.$lxl_isAvoidHighRisk_vStation,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isAvoidHighRisk_vStation_allFactions',
						$checked = global.$kAAIT_Data.$lxl_isAvoidHighRisk_vStation_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<!-- <signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 110}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isStepForward_vShip',
						$checked = global.$kAAIT_Data.$lxl_isStepForward_vShip,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isStepForward_vShip_allFactions',
						$checked = global.$kAAIT_Data.$lxl_isStepForward_vShip_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/> -->
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 111}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isStepForward_vStation',
						$checked = global.$kAAIT_Data.$lxl_isStepForward_vStation,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isStepForward_vStation_allFactions',
						$checked = global.$kAAIT_Data.$lxl_isStepForward_vStation_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 112}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isMoveOutOfRange_vShip',
						$checked = global.$kAAIT_Data.$lxl_isMoveOutOfRange_vShip,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isMoveOutOfRange_vShip_allFactions',
						$checked = global.$kAAIT_Data.$lxl_isMoveOutOfRange_vShip_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 113}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isMoveOutOfRange_vStation',
						$checked = global.$kAAIT_Data.$lxl_isMoveOutOfRange_vStation,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'lxl_isMoveOutOfRange_vStation_allFactions',
						$checked = global.$kAAIT_Data.$lxl_isMoveOutOfRange_vStation_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 16}]" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 4}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'isCarriersAttackLikeDestroyers',
						$checked = global.$kAAIT_Data.$isCarriersAttackLikeDestroyers,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 5}, $halign='right', $color='Helper.color.blue']" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'isCarriersAttackLikeDestroyers_allFactions',
						$checked = global.$kAAIT_Data.$isCarriersAttackLikeDestroyers_allFactions,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>

				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']" />
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 15}]" />
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'isUseNPCSkills',
						$checked = global.$kAAIT_Data.$isUseNPCSkills,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>

				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text='']"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Add_Row"/>
				<signal_cue_instantly cue="md.Simple_Menu_API.Make_Text" param="table[$col=1, $text={1111920, 2}, $color='Helper.color.red']"/>
				<signal_cue_instantly
					cue = "md.Simple_Menu_API.Make_CheckBox"
					param = "table[
						$id = 'debugChance',
						$checked = if global.$kAAIT_Data.$debugChance == 100 then true else false,
						$col = 2,
						$width = 'Helper.standardButtonHeight', $height = 'Helper.standardButtonHeight',
						$bgColor = 'Helper.color.red',
						$onClick = kAAIT_ExtOpts_OnCheckboxChange
					]"/>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_ExtOpts_OnSliderChange" instantiate="true">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<debug_text text="event.param.$id + ' pre: ' + global.$kAAIT_Data.{'$' + event.param.$id}" chance="global.$kAAIT_Data.$debugChance"/>
				<set_value name="global.$kAAIT_Data.{'$' + event.param.$id}" exact="event.param.$value" />
				<debug_text text="event.param.$id + ' post: ' + global.$kAAIT_Data.{'$' + event.param.$id}" chance="global.$kAAIT_Data.$debugChance"/>
				<cancel_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_ExtOpts_OnCheckboxChange">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<debug_text text="event.param.$id + ' pre: ' + global.$kAAIT_Data.{'$' + event.param.$id}" chance="global.$kAAIT_Data.$debugChance"/>
				<do_if value="event.param.$id == 'debugChance'">
					<set_value name="global.$kAAIT_Data.{'$' + event.param.$id}" exact="if event.param.$checked then 100 else 0" />
				</do_if>
				<do_else>
					<set_value name="global.$kAAIT_Data.{'$' + event.param.$id}" exact="event.param.$checked" />
				</do_else>
				<debug_text text="event.param.$id + ' post: ' + global.$kAAIT_Data.{'$' + event.param.$id}" chance="global.$kAAIT_Data.$debugChance"/>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_ExtOpts_OnDropDownConfirmed">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<debug_text text="event.param.$id + ' to: ' + @event.param.$option.$text + ' value: ' + @event.param.$option.$value" chance="global.$kAAIT_Data.$debugChance" />
				<debug_text text="event.param.$id + ' pre: ' + global.$kAAIT_Data.{'$' + event.param.$id}" chance="global.$kAAIT_Data.$debugChance"/>
				<set_value name="global.$kAAIT_Data.{'$' + event.param.$id}" exact="(event.param.$option.$value)" />
				<debug_text text="event.param.$id + ' post: ' + global.$kAAIT_Data.{'$' + event.param.$id}" chance="global.$kAAIT_Data.$debugChance"/>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<!--
			8888b.  888888 88""Yb 88   88  dP""b8
			 8I  Yb 88__   88__dP 88   88 dP   `"
			 8I  dY 88""   88""Yb Y8   8P Yb  "88
			8888Y"  888888 88oodP `YbodP'  YboodP
		 -->
		<cue name="kAAIT_Debug2" namespace="this">
			<conditions>
				<event_ui_triggered screen="'Chat_Window_API'" control="'text_entered'" />
				<check_any>
					<check_value value="event.param3.$text == 'debug aait enable'" />
					<check_value value="event.param3.$text == 'debug aait disable'" />
					<check_value value="event.param3.$text == 'debug aait modules'" />
					<check_value value="event.param3.$text == 'debug aait forward'" />
					<check_value value="event.param3.$text == 'debug aait forward2'" />
					<check_value value="event.param3.$text == 'debug aait forward3'" />
					<check_value value="event.param3.$text == 'debug aait forward4'" />
					<check_value value="event.param3.$text == 'debug aait beacon'" />
					<check_value value="event.param3.$text == 'debug aait dps'" />
					<check_value value="event.param3.$text == 'debug aait attackers'" />
					<check_value value="event.param3.$text == 'debug aait target'" />
				</check_any>
			</conditions>
			<actions>
				<debug_text text="event.param3" />
				<do_if value="event.param3.$text == 'debug aait enable'">
					<set_value name="global.$kAAIT_Data.$debugChance" exact="100" />
				</do_if>
				<do_elseif value="event.param3.$text == 'debug aait disable'">
					<set_value name="global.$kAAIT_Data.$debugChance" exact="0" />
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait modules'">
					<find_object_component object="player.target" name="$kAAIT_modules" multiple="true" class="class.module" checkoperational="true" />
					<do_for_each name="$module_inList" in="$kAAIT_modules">
						<debug_text text="'$module_inList.hullpercentage: ' + $module_inList.hullpercentage" />
					</do_for_each>
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait forward'">
					<!-- point on a line
					https://math.stackexchange.com/questions/251792/vector-equation-spelled-out?noredirect=1&lq=1
					v=(x1,y1)−(x0,y0)
					v=(9,13)−(3,4)=(6,9)
					||v||=squareroot(6^2+9^2)≈10.8
					u=v/||v||≈(0.55,0.83)
					from (3,4) will be (3,4)+3u, or about (4.66,6.50).
					-->
					<create_position name="$pos_ship" space="player.ship.sector" object="player.ship" />
					<create_position name="$pos_target" space="player.ship.sector" object="player.target" />
					<create_position name="$v_shipToTarget" space="player.ship.sector"
						x="$pos_target.x - $pos_ship.x"
						y="$pos_target.y - $pos_ship.y"
						z="$pos_target.z - $pos_ship.z"
					/>
					<set_value name="$dist_shipToTarget" exact="player.ship.distanceto.{player.target}" />
					<create_position name="$u_shipToTarget" space="player.ship.sector"
						x="$v_shipToTarget.x / $dist_shipToTarget"
						y="$v_shipToTarget.y / $dist_shipToTarget"
						z="$v_shipToTarget.z / $dist_shipToTarget"
					/>
					<create_position name="$pos_inchFront" space="player.ship.sector"
						x="$pos_ship.x + $u_shipToTarget.x * player.ship.size"
						y="$pos_ship.y + $u_shipToTarget.y * player.ship.size"
						z="$pos_ship.z + $u_shipToTarget.z * player.ship.size"
					/>
					<do_if value="@parent.$beacon">
						<destroy_object object="parent.$beacon" />
					</do_if>
					<create_object name="parent.$beacon" sector="player.ship.sector" macro="macro.env_deco_nav_beacon_t1_macro" owner="faction.player">
						<position value="$pos_inchFront" />
					</create_object>
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait forward2'">
					<!-- from point 1, get point 2 at distance and vector
					https://stackoverflow.com/questions/52781607/3d-point-from-two-angles-and-a-distance
					Px = distance * sin(yaw) * cos(pitch) 
					Py = distance * sin(pitch) 
					Pz = distance * cos(yaw) * cos(pitch)
					-->
					<create_position name="$pos_ship" space="player.ship.sector" object="player.ship" />
					<create_position name="$pos_inchFront" space="player.ship.sector"
						x="$pos_ship.x + player.ship.size * sin (player.ship.rotation.yaw) * cos (player.ship.rotation.pitch)"
						y="$pos_ship.y + player.ship.size * sin (player.ship.rotation.pitch)"
						z="$pos_ship.z + player.ship.size * cos (player.ship.rotation.yaw) * cos (player.ship.rotation.pitch)"
					/>
					<do_if value="@parent.$beacon">
						<destroy_object object="parent.$beacon" />
					</do_if>
					<create_object name="parent.$beacon" sector="player.ship.sector" macro="macro.env_deco_nav_beacon_t1_macro" owner="faction.player">
						<position value="$pos_inchFront" />
					</create_object>
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait forward3'">
					<!-- from point 1, get point 2 at distance and vector
					https://stackoverflow.com/questions/52781607/3d-point-from-two-angles-and-a-distance
					Px = distance * sin(yaw) * cos(pitch) 
					Py = distance * sin(pitch) 
					Pz = distance * cos(yaw) * cos(pitch)
					-->
					<create_position name="$pos_ship" space="player.ship.sector" object="player.ship" />
					<create_position name="$pos_target" space="player.ship.sector" object="player.target" />
					<create_orientation name="$rot_shipToTarget" orientation="look_at" refposition="$pos_target">
						<position object="player.ship" space="player.ship.sector"/>
					</create_orientation>
					<create_position name="$pos_inchFront" space="player.ship.sector"
						x="$pos_ship.x + player.ship.size * sin ($rot_shipToTarget.yaw) * cos ($rot_shipToTarget.pitch)"
						y="$pos_ship.y + player.ship.size * sin ($rot_shipToTarget.pitch)"
						z="$pos_ship.z + player.ship.size * cos ($rot_shipToTarget.yaw) * cos ($rot_shipToTarget.pitch)"
					/>
					<do_if value="@parent.$beacon">
						<destroy_object object="parent.$beacon" />
					</do_if>
					<create_object name="parent.$beacon" sector="player.ship.sector" macro="macro.env_deco_nav_beacon_t1_macro" owner="faction.player">
						<position value="$pos_inchFront" />
					</create_object>
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait forward4'">
					<create_position name="$pos_ship" space="player.target.sector" object="player.target" />
					<find_gravidar_contact name="$enemies" object="player.target" class="[class.ship_l, class.ship_xl, class.station]" docked="false" functional="true" maybeattackedby="player.target" multiple="true" sortbydistanceto="player.target">
						<match_context macro="this.sector.macro"/>
						<match class="class.buildstorage" negate="true"/>
					</find_gravidar_contact>
					<set_value name="$object_other" exact="$enemies.{1}" />
					<create_position name="$pos_target" space="player.target.sector" object="$object_other" />
					<create_orientation name="$rot_shipToTarget" orientation="look_at" refposition="$pos_target">
						<position object="player.target" space="player.target.sector"/>
					</create_orientation>
					<create_position name="$pos_inchFront" space="player.target.sector"
						x="$pos_ship.x + player.target.size * 2 * sin ($rot_shipToTarget.yaw) * cos ($rot_shipToTarget.pitch)"
						y="$pos_ship.y + player.target.size * 2 * sin ($rot_shipToTarget.pitch)"
						z="$pos_ship.z + player.target.size * 2 * cos ($rot_shipToTarget.yaw) * cos ($rot_shipToTarget.pitch)"
					/>
					<do_if value="@parent.$beacon">
						<destroy_object object="parent.$beacon" />
					</do_if>
					<create_object name="parent.$beacon" sector="player.target.sector" macro="macro.env_deco_nav_beacon_t1_macro" owner="faction.player">
						<position value="$pos_inchFront" />
					</create_object>
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait beacon'">
					<do_if value="@parent.$beacon">
						<destroy_object object="parent.$beacon" />
					</do_if>
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait dps'">
					<debug_text text="'$dps: ' + player.target.dps.all" />
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait attackers'">
					<debug_text text="@global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_attackers" />
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait target'">
					<debug_text text="@global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_target + ' ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_target.knownname + ' ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_target.idcode + ' ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_target.defensible + ' ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_target.defensible.knownname + ' ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_target.defensible.idcode" />
				</do_elseif>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Debug2_DestroyWeapons">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<debug_text text="'$interact_target: ' + $interact_target + ' (' + $interact_target.knownname + ')'" />
				<do_if value="$interact_target.isclass.ship">
					<set_value name="$weapons" exact="$interact_target.weapons.operational.list" />
				</do_if>
				<do_else>
					<set_value name="$weapons" exact="
						@$interact_target.weapons.operational.count + 
						[@$interact_target.weapons.operational.count, @$interact_target.turrets.operational.count].max
					" />
				</do_else>
				<do_if value="$interact_target.isclass.station">
					<append_list_elements name="$weapons" other="$interact_target.turrets.operational.list" />
				</do_if>
				<do_all counter="$i" exact="[25, $weapons.count].min">
					<destroy_object object="$weapons.{$i}" />
				</do_all>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Debug2_AddMoveAroundBeacons">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<debug_text text="'$interact_target: ' + $interact_target + ' (' + $interact_target.knownname + ', ' + $interact_target.idcode + ')'" />
				<set_value name="kAAIT2.$debugChance_idCode" exact="$interact_target.idcode" />
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Debug2_RemoveMoveAroundBeacons">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<remove_value name="kAAIT2.$debugChance_idCode" />
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Debug2_DebugLogWeaponRanges">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<debug_text text="'interact_target: ' + $interact_target + ', ' + $interact_target.knownname + ', ' + $interact_target.idcode" />
				<debug_text text="'size: ' + $interact_target.size" />
				<debug_text text="'primary: ' + $interact_target.maxcombatrange.primary" />
				<debug_text text="'secondary: ' + $interact_target.maxcombatrange.secondary" />
				<debug_text text="'lasers.all: ' + $interact_target.maxcombatrange.lasers.all" />
				<debug_text text="'missiles.all: ' + $interact_target.maxcombatrange.missiles.all" />
				<debug_text text="'turrets: ' + $interact_target.maxcombatrange.turrets" />
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="kAAIT_Debug_InteractMenu" namespace="this">
			<conditions>
				<event_cue_signalled cue="md.Interact_Menu_API.Get_Actions" />
			</conditions>
			<actions>
				<debug_text text="'event.param.$object: ' + event.param.$object" chance="global.$kAAIT_Data.$debugChance" />
				<!-- <do_for_each name="$key" in="event.param">
					<debug_text text="$key + ': ' + '(' + typeof (event.param.{$key}) + ') ' + event.param.{$key}" chance="global.$kAAIT_Data.$debugChance" />
				</do_for_each> -->
				<set_value name="$interact_ships" exact="@event.param.$selectedplayerships" />
				<do_if value="typeof ($interact_ships) != datatype.list">
					<set_value name="$interact_ships" exact="[]" />
				</do_if>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<do_if value="$interact_target.isplayerowned">
					<append_to_list name="$interact_ships" exact="$interact_target" />
				</do_if>
				<debug_text text="'event.name: ' + event.name" chance="global.$kAAIT_Data.$debugChance" />
				<do_if value="@$interact_target.exists">
					<debug_text text="'$interact_target: ' + $interact_target + ' (' + $interact_target.knownname + ')'" chance="global.$kAAIT_Data.$debugChance" />
					<do_if value="global.$kAAIT_Data.$debugChance">
						<do_if value="$interact_target.isclass.ship">
							<set_value name="$weapons" exact="@$interact_target.weapons.operational.count" />
						</do_if>
						<do_else>
							<set_value name="$weapons" exact="
								@$interact_target.weapons.operational.count + 
								[@$interact_target.weapons.operational.count, @$interact_target.turrets.operational.count].max
							" />
						</do_else>
						<!-- <do_if value="$weapons"> -->
							<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
								$id = 'kaait_destroy_weapons',
								$section = 'main',
								$text = 'debug: destroy ' + [$weapons, 25].min + ' of ' + $weapons + ' weapons',
								$icon = null,
								$callback = kAAIT_Debug2_DestroyWeapons
							]" />
						<!-- </do_if> -->
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_show_debug_becons',
							$section = 'main',
							$text = 'debug: log activities',
							$icon = null,
							$callback = kAAIT_Debug2_AddMoveAroundBeacons
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_remove_debug_beacons',
							$section = 'main',
							$text = 'debug: stop logging',
							$icon = null,
							$callback = kAAIT_Debug2_RemoveMoveAroundBeacons
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_debug_order',
							$section = 'main',
							$text = 'debug: order: ' + @$interact_target.order.id + ', ' + @interact_target.defaultorder.id,
							$icon = null,
							$callback = kAAIT_Debug2_DebugLogWeaponRanges
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kaait_travel_active',
							$section = 'main',
							$text = 'debug: travel.active: ' + @$interact_target.travel.active + ' yaw: ' + ($interact_target.rotation.yaw * 180 / pi),
							$icon = null,
							$callback = null
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kAAIT_Avoid_user',
							$section = 'main',
							$text = 'debug: avoid vars: ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + $interact_target.idcode}.$kAAIT_isAvoidHighRisk_user + ' (' + @$interact_target.order.$kAAITParam_isAvoidHighRisk + ', ' + @$interact_target.defaultorder.$kAAITParam_isAvoidHighRisk + ')',
							$icon = null,
							$callback = null
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'kAAIT_StepWithdraw_user',
							$section = 'main',
							$text = 'debug: step/withdraw vars: ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + $interact_target.idcode}.$kAAIT_isStepForwardWithdraw_user + ' (' + @$interact_target.order.$kAAITParam_isStepForwardWithdraw + ', ' + @$interact_target.defaultorder.$kAAITParam_isStepForwardWithdraw + ')',
							$icon = null,
							$callback = null
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'dps',
							$section = 'main',
							$text = 'debug: dps: ' + @$interact_target.dps.all + ' shield: ' + @$interact_target.shieldpercentage,
							$icon = null,
							$callback = null
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'debug_resupply',
							$section = 'main',
							$text = 'debug: signal resupply',
							$icon = null,
							$callback = DebugSignalResupply
						]" />
						<signal_cue_instantly cue="md.Interact_Menu_API.Add_Action" param = "table[
							$id = 'debug_combat_range',
							$section = 'main',
							$text = 'debug: min, max: ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + $interact_target.idcode}.$kAAIT_data.$combatRange_min + ', ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + $interact_target.idcode}.$kAAIT_data.$combatRange_max,
							$icon = null,
							$callback = DebugSignalResupply
						]" />
						<debug_text text="'$kAAIT_data: ' + @global.$kAAIT_Data.$settingsByShipId.{'$' + $interact_target.idcode}.$kAAIT_data" />
					</do_if>
				</do_if>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="DebugChat">
			<conditions>
				<check_all>
					<event_ui_triggered screen="'Chat_Window_API'" control="'text_entered'" />
					<check_any>
						<check_value value="event.param3.$text == 'debug aait data'" />
						<check_value value="event.param3.$text == 'debug aait bombers'" />
						<check_value value="event.param3.$text == 'debug aait gun count'" />
						<check_value value="event.param3.$text == 'debug aait engage pos'" />
						<check_value value="event.param3.$text == 'debug aait engage pos2'" />
						<check_value value="event.param3.$text == 'debug aait give hull'" />
					</check_any>
				</check_all>
			</conditions>
			<actions>
				<debug_text text="@event.param3" />
				<do_if value="event.param3.$text == 'debug aait data'">
					<debug_text text="player.target + ': ' + player.target.knownname + ', ' + player.target.idcode" />
					<do_for_each name="$prop" valuename="$value" in="global.$kAAIT_Data.$settingsByShipId.{'$' + player.target.idcode}.$kAAIT_data">
						<debug_text text="$prop + ': ' + $value" />
					</do_for_each>
				</do_if>
				<do_elseif value="event.param3.$text == 'debug aait bombers'">
					<debug_text text="player.target + ': ' + player.target.knownname + ', ' + player.target.idcode" />
					<debug_text text="player.target + ' missile.count: ' + player.target.ammostorage.missile.count" />
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait gun count'">
					<debug_text text="player.target + ': ' + @player.target.knownname + ', ' + @player.target.idcode" />
					<debug_text text="player.target + ' weapons.operational.count: ' + @player.target.weapons.operational.count" />
					<debug_text text="player.target + ' turrets.operational.count: ' + @player.target.turrets.operational.count" />
					<debug_text text="player.target + ' maxradarrange: ' + @player.target.maxradarrange" />
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait engage pos'">
					<set_value name="md.$target2" exact="@md.$target1" />
					<set_value name="md.$target1" exact="player.target" />
					<debug_text text="'$target1: ' + @md.$target1.idcode" />
					<debug_text text="'$target2: ' + @md.$target2.idcode" />
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait engage pos2'">
					<do_if value="@md.$target1 and @md.$target2">
						<set_value name="$attacker" exact="md.$target1" />
						<set_value name="$victim" exact="md.$target2" />
						<set_value name="$orderLocation_space" exact="$attacker.zone" />
						<create_position name="$posShip" space="$orderLocation_space" object="md.$target1" />
						<create_position name="$posTarget" space="$orderLocation_space" object="$victim" />
						<create_orientation name="$rotFromTarget" orientation="look_at" refposition="$posShip">
							<position value="$posTarget" />
						</create_orientation>
						<debug_text text="'$rotFromTarget: ' + $rotFromTarget" />
						<set_value name="$yaw_deg" exact="$rotFromTarget.yaw * 180 / pi" />
						<debug_text text="'$yaw_deg: ' + $yaw_deg" />
						<!-- <do_if value="$victim.isclass.ship or @$victim.defensible.isclass.ship">
							<set_value name="$yaw_deg" exact="$yaw_deg + [-30, -22, -15, -7, 0, 7, 15, 22, 30].random" />
						</do_if>
						<do_else>
							<set_value name="$yaw_deg" exact="$yaw_deg + [-45, -37, -30, -22, -15, -7, 0, 7, 15, 22, 30, 37, 45].random" />
						</do_else> -->
						<!-- <set_value name="$yaw_deg" exact="$yaw_deg - 45" /> -->
						<debug_text text="'$yaw_deg (adj): ' + $yaw_deg" />
						<set_value name="$yaw" exact="$yaw_deg * pi / 180" />
						<set_value name="$kAAIT_maxCombatRange" exact="8km" />
						<create_position name="$orderLocation_pos"
							x="$posTarget.x + $kAAIT_maxCombatRange * sin ($yaw) * cos ($rotFromTarget.pitch)"
							y="$posTarget.y + $kAAIT_maxCombatRange * sin ($rotFromTarget.pitch) + [-5m, -2.5m, 0, 2.5m, 5m].random"
							z="$posTarget.z + $kAAIT_maxCombatRange * cos ($yaw) * cos ($rotFromTarget.pitch)"
						/>
						<do_if value="@md.$beacon_debug">
							<destroy_object object="md.$beacon_debug" />
						</do_if>
						<create_object name="md.$beacon_debug"
							zone="$orderLocation_space"
							macro="macro.env_deco_nav_beacon_t1_macro"
							owner="faction.player">
							<position x="$orderLocation_pos.x" y="$orderLocation_pos.y" z="$orderLocation_pos.z" />
						</create_object>
					</do_if>
				</do_elseif>
				<do_elseif value="event.param3.$text == 'debug aait give hull'">
				</do_elseif>
				<reset_cue cue="this" />
			</actions>
		</cue>
		<cue name="DebugSignalResupply">
			<conditions>
				<event_cue_signalled />
			</conditions>
			<actions>
				<set_value name="$interact_target" exact="@event.param.$object" />
				<debug_text text="'interact_target: ' + $interact_target + ', ' + $interact_target.knownname + ', ' + $interact_target.idcode" />
				<signal_objects object="$interact_target" param="'resupply'" param3="100" />
				<reset_cue cue="this" />
			</actions>
		</cue>
	</cues>
</mdscript>
